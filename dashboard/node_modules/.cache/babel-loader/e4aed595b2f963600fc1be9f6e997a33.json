{"ast":null,"code":"var _jsxFileName = \"/home/retr0/Documents/Projects/dsfh-dashboard/src/components/Inference.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Button, Input, Alert, Label } from \"reactstrap\";\nimport { db } from \"../fire\";\nconst styles = {\n  marginTop: \"80px\"\n};\nconst stylestwo = {\n  textAlign: \"center\",\n  mariginTop: \"10px\",\n  padding: \"20px\"\n};\nexport default class Inference extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedFile: null,\n      prediction: \"\",\n      error: \"\",\n      model_data: [],\n      model: \"--select--\"\n    };\n\n    this.onChangeHandler = event => {\n      this.setState({\n        model: event.target.value\n      });\n    };\n\n    this.fileChangedHandler = event => {\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.uploadHandler = () => {\n      if (this.state.model === \"--select--\") {\n        this.setState({\n          error: \"Please select a model\"\n        });\n      } else {\n        const url = \"https://api-2445582824322.staging.gw.apicast.io/deploy/\" + this.state.model + \"/a/?user_key=402d46c6d21b86e66339d12e79e05366\";\n        const formData = new FormData();\n        formData.append(\"file\", this.state.selectedFile, this.state.selectedFile.name);\n        axios.post(url, formData).then(res => {\n          console.log(res.data);\n\n          if (res.data.prediction) {\n            this.setState({\n              prediction: res.data.prediction\n            });\n          } else {\n            this.setState({\n              error: \"Inference did not work! Check again later\"\n            });\n          }\n        });\n      }\n\n      this.setState({\n        selectedFile: null,\n        prediction: \"\",\n        error: \"\",\n        model_data: [],\n        model: \"--select--\"\n      });\n    };\n  }\n\n  componentDidMount() {\n    db.collection(\"Models\").get().then(querySnapshot => {\n      const data = querySnapshot.docs.map(doc => doc.data());\n      this.setState({\n        model_data: data\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: styles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Label, {\n      for: \"selectModels\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Select Model:\"), React.createElement(Input, {\n      type: \"select\",\n      name: \"select\",\n      id: \"selectModels\",\n      value: this.state.model,\n      onChange: this.onChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"--select--\"), this.state.model_data.map((data, index) => React.createElement(\"option\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, data.name))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"file\",\n      onChange: this.fileChangedHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(Button, {\n      color: \"primary\",\n      onClick: this.uploadHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Upload!\"), this.state.error && React.createElement(\"div\", {\n      style: stylestwo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      color: \"danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, this.state.error)), this.state.prediction && React.createElement(\"div\", {\n      style: stylestwo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      color: \"success\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"The disease is \", this.state.prediction, \".\")));\n  }\n\n}","map":{"version":3,"sources":["/home/retr0/Documents/Projects/dsfh-dashboard/src/components/Inference.js"],"names":["React","Component","axios","Button","Input","Alert","Label","db","styles","marginTop","stylestwo","textAlign","mariginTop","padding","Inference","state","selectedFile","prediction","error","model_data","model","onChangeHandler","event","setState","target","value","fileChangedHandler","files","uploadHandler","url","formData","FormData","append","name","post","then","res","console","log","data","componentDidMount","collection","get","querySnapshot","docs","map","doc","render","index"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Button, Input, Alert, Label } from \"reactstrap\";\nimport { db } from \"../fire\";\n\nconst styles = {\n  marginTop: \"80px\"\n};\nconst stylestwo = {\n  textAlign: \"center\",\n\n  mariginTop: \"10px\",\n  padding: \"20px\"\n};\n\nexport default class Inference extends Component {\n  state = {\n    selectedFile: null,\n    prediction: \"\",\n    error: \"\",\n    model_data: [],\n    model: \"--select--\"\n  };\n\n  componentDidMount() {\n    db.collection(\"Models\")\n      .get()\n      .then(querySnapshot => {\n        const data = querySnapshot.docs.map(doc => doc.data());\n        this.setState({ model_data: data });\n      });\n  }\n  onChangeHandler = event => {\n    this.setState({ model: event.target.value });\n  };\n  fileChangedHandler = event => {\n    this.setState({ selectedFile: event.target.files[0] });\n  };\n  uploadHandler = () => {\n    if (this.state.model === \"--select--\") {\n      this.setState({ error: \"Please select a model\" });\n    } else {\n      const url =\n        \"https://api-2445582824322.staging.gw.apicast.io/deploy/\" +\n        this.state.model +\n        \"/a/?user_key=402d46c6d21b86e66339d12e79e05366\";\n      const formData = new FormData();\n      formData.append(\n        \"file\",\n        this.state.selectedFile,\n        this.state.selectedFile.name\n      );\n      axios.post(url, formData).then(res => {\n        console.log(res.data);\n        if (res.data.prediction) {\n          this.setState({ prediction: res.data.prediction });\n        } else {\n          this.setState({ error: \"Inference did not work! Check again later\" });\n        }\n      });\n    }\n    this.setState({\n      selectedFile: null,\n      prediction: \"\",\n      error: \"\",\n      model_data: [],\n      model: \"--select--\"\n    });\n  };\n\n  render() {\n    return (\n      <div style={styles}>\n        <Label for=\"selectModels\">Select Model:</Label>\n        <Input\n          type=\"select\"\n          name=\"select\"\n          id=\"selectModels\"\n          value={this.state.model}\n          onChange={this.onChangeHandler}\n        >\n          <option>--select--</option>\n          {this.state.model_data.map((data, index) => (\n            <option key={index}>{data.name}</option>\n          ))}\n        </Input>\n        <br />\n        <Input type=\"file\" onChange={this.fileChangedHandler} />\n        <br />\n        <Button color=\"primary\" onClick={this.uploadHandler}>\n          Upload!\n        </Button>\n\n        {this.state.error && (\n          <div style={stylestwo}>\n            <Alert color=\"danger\">{this.state.error}</Alert>\n          </div>\n        )}\n        {this.state.prediction && (\n          <div style={stylestwo}>\n            <Alert color=\"success\">\n              The disease is {this.state.prediction}.\n            </Alert>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}